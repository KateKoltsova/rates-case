# АРІ для отримання поточного курсу долара

## Цей АРІ має наступний функціонал:

- Отримує поточний курс(-и) за допомогою сторонніх відкритих АРІ.
  Наразі реалізована взаємодія з Монобанк та Приватбанк, за замовченням використовується Приватбанк;
- Зберігає отриманий курс долара до БД MySQL;
- Підписує на щоденну розсилку емейли, надіслані за спеціальним запитом.

##### Якщо курс отримати не вдалось з якихось причин, то для розсилки використовується останній актуальний курс.

### Для початку тестування АРІ необхідно:

- створити файл _**".env"**_ за зразком _**".env.example"**_ у папці _"/rates-case/src"_;
- створити файл _**"mysql.env"**_ за зразком _**"mysql.env.example"**_ у папці _"/rates-case"_;
- запустити _"/rates-case/docker-compose.yml"_.

##### Команди докера встановлюють необхідні залежності та сервіси, а також запускають міграції.

##### Запущений сервер доступний за адресою _**"http://localhost:8080/"**_.

##### View за вказаним посиланням наразі налаштована тільки у вигляді форми з запитом на додавання ємейлу до розсилки, без валідації та дуже примітивна.

##### Також у репозиторії міститься постман колекція для додавання ємейлу та отримання поточного та останнього актуалього курсу долара.

##### Для перевірки відправки листів на емейл необхідно у вашому створеному файлі _**".env"**_ закоментувати рядок _"MAIL_MAILER=log"_, розкоментувати змінні _"MAIL"_ та підставити в них дані вашого SMTP-серверу, або нічого не змінювати - тоді листи буде записано у файл _"/rates-case/src/storage/logs/laravel.log"_.

##### Розсилка налаштована на 8му ранку за UTC кожного дня, щоб протестувати роботу шедулера ви можете у файлі _"/rates-case/src/app/Console/Kernel.php"_ у рядку 20 змінити _**"dailyAt('08:00')"**_ на _**"everyTwoMinutes()"**_